(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var n=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(r=[{key:"analyzeSEO",value:function(){for(var t=document.body.innerText.split(/\s+/).filter((function(t){return t.length>0})).length,e={},r=1;r<=6;r++){var n=document.querySelectorAll("h"+r).length;e["h"+r]=n}var o=document.title||"No title tag found",i=document.querySelector("meta[name='description']"),a=i?i.content:"No description meta tag found",u=document.querySelector("meta[name='keywords']"),l=u?u.content:"No keywords meta tag found",c=document.querySelectorAll("img"),f=0;c.forEach((function(t){t.hasAttribute("alt")&&""!==t.getAttribute("alt").trim()&&f++}));var y=c.length,s=y-f,m=document.querySelectorAll("a[href]"),b=0,p=0;return m.forEach((function(t){var e=t.getAttribute("href");e.startsWith("#")||e.startsWith("mailto:")||e.startsWith("tel:")||(e.includes(window.location.host)?b++:p++)})),{wordCount:t,headings:e,metaTitle:o,metaDescription:a,metaKeywords:l,images:{total:y,withAlt:f,withoutAlt:s},links:{total:m.length,internal:b,external:p}}}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var u=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"analyze",value:function(){return(new n).analyzeSEO()}}],null&&i(t.prototype,null),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var y=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"analyzeKeywords",value:function(t){var e=document.body.innerText.toLowerCase(),r=e.split(/\s+/).filter((function(t){return t.length>0})).length,n=[];return t.forEach((function(t){var o=t.toLowerCase(),i=new RegExp("\\b".concat(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\b"),"g"),a=e.match(i),u=a?a.length:0,l=u/r*100;n.push({keyword:t,count:u,density:l})})),{totalWords:r,keywordData:n}}}])&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"analyze",value:function(t){return(new y).analyzeKeywords(t)}}],null&&m(t.prototype,null),e&&m(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();chrome.runtime.onMessage.addListener((function(t,e,r){if(console.log("Content script received message:",t),"analyze"===t.action)r(u.analyze());else if("keywordAnalysis"===t.action){var n=t.keywords;r(p.analyze(n))}}))})();